<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuración | Call of Productivity</title>
    
    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Estilos -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/settings.css">
    <link rel="stylesheet" href="css/settings-inputs.css">
    
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar (MISMA ESTRUCTURA QUE DASHBOARD) -->
        <aside class="sidebar">
            <div class="logo">
                <h1>COP</h1>
                <span>Call of Productivity</span>
            </div>
            
            <nav class="nav-menu">
                <a href="dashboard.html" class="nav-item">
                    <i class="fas fa-radar"></i>
                    <span>Dashboard</span>
                </a>
                <a href="missions.html" class="nav-item">
                    <i class="fas fa-crosshairs"></i>
                    <span>Misiones</span>
                </a>
            
                <a href="profile.html" class="nav-item">
                    <i class="fas fa-user-secret"></i>
                    <span>Profile</span>

                <a href="Logros.html" class="nav-item">
                    <i class="fas fa-trophy"></i>
                    <span>Logros</span>
                </a>
                <a href="settings.html" class="nav-item active">
                    <i class="fas fa-cog"></i>
                    <span>Configuración</span>
                </a>
            </nav>
        </aside>

        <!-- Contenido Principal -->
        <main class="main-content">
            <!-- Header -->
            <header class="settings-header">
                <div class="header-left">
                    <h2><i class="fas fa-cog"></i> Configuración del Sistema</h2>
                    <p class="header-subtitle">Personaliza tu experiencia en Call of Productivity</p>
                </div>
                <div class="header-right">
                    <button class="btn btn-secondary" id="saveAllBtn">
                        <i class="fas fa-save"></i>
                        Guardar Todo
                    </button>
                    <button class="btn btn-primary" id="resetDefaultsBtn">
                        <i class="fas fa-undo"></i>
                        Restaurar Predeterminados
                    </button>
                </div>
            </header>

            <!-- Grid Principal -->
            <div class="settings-grid">
                <!-- Columna Izquierda -->
                <div class="settings-column">
                    <!-- Configuración de Cuenta -->
<!-- Ejemplos de inputs mejorados en settings.html -->
<section class="settings-section account-settings">
    <h3 class="section-title">
        <i class="fas fa-user-shield"></i>
        Configuración de Cuenta
    </h3>
    
    <div class="settings-card">
        <!-- Input con icono -->
        <div class="form-group input-with-icon">
            <label for="currentEmail">
                <i class="fas fa-envelope"></i>
                Correo Actual
            </label>
            <i class="fas fa-at"></i>
            <input type="email" id="currentEmail" value="operador@cop.com" disabled>
            <small class="form-hint">Tu correo principal de contacto</small>
        </div>
        
        <!-- Input con validación -->
        <div class="form-group">
            <label for="newEmail">
                <i class="fas fa-envelope-open"></i>
                Nuevo Correo
            </label>
            <input type="email" id="newEmail" placeholder="nuevo@cop.com" 
                   class="input-valid">
            <div class="validation-message validation-success">
                ✓ Formato de correo válido
            </div>
        </div>
        
        <!-- Input de contraseña con toggle -->
        <div class="form-group password-input-group">
            <label for="confirmPassword">
                <i class="fas fa-key"></i>
                Confirmar Contraseña
            </label>
            <input type="password" id="confirmPassword" placeholder="••••••••">
            <button type="button" class="password-toggle" data-target="confirmPassword">
                <i class="fas fa-eye"></i>
            </button>
            <small class="form-hint">Mínimo 8 caracteres con mayúsculas y números</small>
        </div>
        
        <!-- Grupo de inputs en fila -->
        <div class="form-group-row">
            <div class="form-group">
                <label for="firstName">
                    <i class="fas fa-user"></i>
                    Nombre
                </label>
                <input type="text" id="firstName" placeholder="Alex" value="Alex">
            </div>
            <div class="form-group">
                <label for="lastName">
                    <i class="fas fa-user"></i>
                    Apellido
                </label>
                <input type="text" id="lastName" placeholder="Johnson" value="Johnson">
            </div>
        </div>
        
        <!-- Select mejorado -->
        <div class="form-group">
            <label for="timezone">
                <i class="fas fa-globe"></i>
                Zona Horaria
            </label>
            <select id="timezone">
                <option value="GMT-5">GMT-5 (Colombia, Perú)</option>
                <option value="GMT-6" selected>GMT-6 (México, Costa Rica)</option>
                <option value="GMT-3">GMT-3 (Argentina, Chile)</option>
                <option value="GMT+1">GMT+1 (España)</option>
            </select>
        </div>
        
        <!-- Range input -->
        <div class="range-group">
            <div class="range-header">
                <label for="notificationVolume">
                    <i class="fas fa-volume-up"></i>
                    Volumen de Notificaciones
                </label>
                <span class="range-value" id="volumeValue">75%</span>
            </div>
            <input type="range" id="notificationVolume" min="0" max="100" value="75">
        </div>
        
        <!-- Checkboxes mejorados -->
        <div class="checkbox-group">
            <label for="newsletter">
                Recibir novedades y actualizaciones
                <input type="checkbox" id="newsletter" checked>
                <span class="checkmark"></span>
            </label>
        </div>
        
        <!-- Botón con acción -->
        <div class="input-action-group">
            <input type="text" id="promoCode" placeholder="Código promocional">
            <button type="button" class="input-action-btn" id="applyPromoBtn">
                <i class="fas fa-ticket-alt"></i>
                Aplicar
            </button>
        </div>
        
        <button class="btn btn-primary" id="updateEmailBtn">
            <i class="fas fa-sync-alt"></i>
            Actualizar Configuración
        </button>
    </div>
</section>

                    <!-- Zona de Peligro -->
                    <section class="settings-section danger-zone">
                        <h3 class="section-title">
                            <i class="fas fa-exclamation-triangle"></i>
                            Zona de Peligro
                        </h3>
                        
                        <div class="settings-card danger-card">
                            <div class="danger-item">
                                <div class="danger-icon">
                                    <i class="fas fa-file-export"></i>
                                </div>
                                <div class="danger-content">
                                    <h4>Exportar Datos</h4>
                                    <p>Descarga todos tus datos en formato JSON. Incluye misiones, estadísticas y configuración.</p>
                                    <button class="btn btn-warning" id="exportDataBtn">
                                        <i class="fas fa-download"></i>
                                        Exportar Mis Datos
                                    </button>
                                </div>
                            </div>
                            
                            <div class="danger-item">
                                <div class="danger-icon">
                                    <i class="fas fa-trash-alt"></i>
                                </div>
                                <div class="danger-content">
                                    <h4>Eliminar Cuenta</h4>
                                    <p>Elimina permanentemente tu cuenta y todos tus datos. Esta acción no se puede deshacer.</p>
                                    <button class="btn btn-danger" id="deleteAccountBtn">
                                        <i class="fas fa-trash"></i>
                                        Eliminar Cuenta
                                    </button>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Información del Sistema -->
                    <section class="settings-section system-info">
                        <h3 class="section-title">
                            <i class="fas fa-info-circle"></i>
                            Información del Sistema
                        </h3>
                        
                        <div class="settings-card">
                            <div class="info-item">
                                <span class="info-label">Versión de la Aplicación:</span>
                                <span class="info-value">Call of Productivity v1.0.0</span>
                            </div>
                            
                            <div class="info-item">
                                <span class="info-label">Última Actualización:</span>
                                <span class="info-value" id="lastAppUpdate">2024-01-15</span>
                            </div>
                            
                            <div class="info-item">
                                <span class="info-label">Estado del Servidor:</span>
                                <span class="info-value status-online">
                                    <i class="fas fa-circle"></i>
                                    Online
                                </span>
                            </div>
                            
                            <div class="info-item">
                                <span class="info-label">ID de Sesión:</span>
                                <span class="info-value" id="sessionId">COP-SESSION-001</span>
                            </div>
                            
                            <div class="info-item">
                                <span class="info-label">Tiempo de Actividad:</span>
                                <span class="info-value" id="uptime">7 días, 3 horas</span>
                            </div>
                            
                            <div class="system-actions">
                                <button class="btn btn-secondary" id="clearCacheBtn">
                                    <i class="fas fa-broom"></i>
                                    Limpiar Caché
                                </button>
                                <button class="btn btn-secondary" id="checkUpdatesBtn">
                                    <i class="fas fa-sync"></i>
                                    Buscar Actualizaciones
                                </button>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <!-- Mensajes de Estado -->
            <div id="settingsMessage" class="message"></div>

            <!-- Footer -->
            <footer class="settings-footer">
                <div class="footer-left">
                    <span>Sistema de Configuración • Todos los cambios se guardan automáticamente</span>
                </div>
                <div class="footer-right">
                    <span>Modo: <strong id="configMode">Operativo</strong></span>
                </div>
            </footer>
        </main>
    </div>

    <!-- Modal de Confirmación para Eliminar Cuenta -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-exclamation-triangle"></i> Confirmar Eliminación de Cuenta</h3>
            </div>
            <div class="modal-body">
                <p>¿Estás seguro de que quieres eliminar tu cuenta? Esta acción:</p>
                <ul>
                    <li>Eliminará permanentemente todos tus datos</li>
                    <li>Eliminará tu historial de misiones</li>
                    <li>Eliminará tu perfil y estadísticas</li>
                    <li><strong>NO se puede deshacer</strong></li>
                </ul>
                <div class="form-group">
                    <label for="confirmDelete">Escribe "ELIMINAR" para confirmar:</label>
                    <input type="text" id="confirmDelete" placeholder="ELIMINAR">
                </div>
            </div>
            <div class="modal-actions">
                <button id="confirmDeleteBtn" class="btn btn-danger" disabled>
                    <i class="fas fa-trash"></i>
                    Sí, eliminar mi cuenta
                </button>
                <button id="cancelDeleteBtn" class="btn btn-secondary">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/supabaseClient.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/settings-effects.js"></script>
</body>
</html>