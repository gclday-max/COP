<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Call of Productivity - Perfil</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/profile.css">
</head>
<body>
    <!-- FONDO DIN√ÅMICO -->
    <div class="background-overlay profile-bg" id="backgroundOverlay"></div>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="dashboard-container">
        <!-- HEADER -->
        <header>
</div>
            <div class="header-content">
                <div class="logo-container" id="logoHome">
                    <a href="dashboard.html" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 15px;">
                        <div class="logo">COP</div>
                        <div class="logo-text">CALL OF PRODUCTIVITY</div>
                    </a>
                </div>
                <nav class="nav-menu">
                    <a href="dashboard.html" class="nav-link">Dashboard</a>
                    <a href="missions.html" class="nav-link">Misiones</a>
                    <a href="profile.html" class="nav-link active">Perfil</a>
                    <a href="Logros.html" class="nav-link">Logros</a>
                </nav>
            </div>
        <!-- Selector de temas (ejemplo en header) -->
<div class="theme-selector-container">
    <!-- Bot√≥n de toggle r√°pido -->
    <button class="btn-theme-toggle" onclick="cambiarTema()" title="Cambio r√°pido de tema">
        üé®
    </button>
    
    <!-- Selector completo (con clases correctas) -->
    <div class="theme-selector">
        <button class="theme-option" data-theme="dark" title="Tema Oscuro">
            <span class="theme-icon">üåô</span>
            <span class="theme-label">Oscuro</span>
        </button>
        
        <button class="theme-option" data-theme="light" title="Tema Claro">
            <span class="theme-icon">‚òÄÔ∏è</span>
            <span class="theme-label">Claro</span>
        </button>
        
        <button class="theme-option" data-theme="military-blue" title="Azul Militar">
            <span class="theme-icon">üéñÔ∏è</span>
            <span class="theme-label">Militar</span>
        </button>
        
        <button class="theme-option" data-theme="tactical-green" title="Verde T√°ctico">
            <span class="theme-icon">üéØ</span>
            <span class="theme-label">T√°ctico</span>
        </button>
        
        <button class="theme-option" data-theme="terminal" title="Terminal">
            <span class="theme-icon">üíª</span>
            <span class="theme-label">Terminal</span>
        </button>
    </div>
</div>
        </header>

        <!-- P√ÅGINA: PERFIL -->
        <section class="page active" id="profile-page">
            <h1>PERFIL DEL OPERADOR</h1>
            <p class="hero-subtitle">Tu estad√≠sticas, progreso y configuraci√≥n personal.</p>

            <div class="profile-container">
                <div class="profile-card">
                    <div class="profile-avatar">
                        <i class="fas fa-user-secret"></i>
                    </div>
                    <h2>Operador: ALPHA-07</h2>
                    <p class="stat-details">Unido: 15/03/2023</p>
                    
                    <div class="profile-stats">
                        <div class="stat-card">
                            <div class="stat-title">Horas Totales</div>
                            <div class="stat-value">247h</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-title">Misiones Complet.</div>
                            <div class="stat-value">42</div>
                        </div>
                    </div>
                </div>

                <div>
                    <h2>PROGRESO GENERAL</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-title">Eficiencia</div>
                            <div class="stat-value">87%</div>
                            <div class="stat-details">+5% este mes</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-title">Tareas Pendientes</div>
                            <div class="stat-value">8</div>
                            <div class="stat-details">3 urgentes</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-title">Tiempo Promedio</div>
                            <div class="stat-value">2.4h</div>
                            <div class="stat-details">Por tarea</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-title">Logros</div>
                            <div class="stat-value">12/25</div>
                            <div class="stat-details">48% completado</div>
                        </div>
                    </div>

                    <h2 style="margin-top: 3rem;">CONFIGURACI√ìN</h2>
                    <div class="mission-type-section">
                        <h3>Preferencias</h3>
                        <div style="margin-top: 1rem;">
                            <button class="btn-complete" style="margin-right: 10px;" onclick="toggleNotificaciones()">
                                <i class="fas fa-bell"></i> Notificaciones
                            </button>
                            <button class="btn-complete" onclick="abrirAjustes()">
                                <i class="fas fa-cog"></i> Ajustes
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FOOTER -->
        <footer>
            <p>CALL OF PRODUCTIVITY ¬© 2026 | Sistema de productividad t√°ctico | Todos los derechos reservados</p>
        </footer>
    </div>

    <!-- MODAL DE AJUSTES -->
    <div id="ajustesModal" class="modal-overlay" style="display: none;">
        <div class="militar-modal">
            <div class="modal-header">
                <h3><i class="fas fa-cog"></i> AJUSTES DEL SISTEMA</h3>
                <button class="modal-close" onclick="cerrarAjustes()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nombre del Operador:</label>
                    <input type="text" id="nombreOperador" class="militar-input" value="ALPHA-07">
                </div>
                <div class="form-group">
                    <label class="form-label">Email de Notificaci√≥n:</label>
                    <input type="email" id="emailNotificacion" class="militar-input" value="operador@callofproductivity.com">
                </div>
                <div class="form-group">
                    <label class="form-label">Recordatorios Diarios:</label>
                    <select id="recordatorios" class="militar-select">
                        <option value="si">S√≠, habilitar</option>
                        <option value="no">No, deshabilitar</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Idioma del Sistema:</label>
                    <select id="idioma" class="militar-select">
                        <option value="es">Espa√±ol</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button class="btn-secondary" onclick="cerrarAjustes()">CANCELAR</button>
                    <button class="btn-primary" onclick="guardarAjustes()">GUARDAR CAMBIOS</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Al final del body, antes de los scripts -->
<div class="theme-float-btn" id="themeFloatBtn">
    <i class="fas fa-palette"></i>
</div>

<div class="theme-float-selector" id="themeFloatSelector">
    <div class="float-header">
        <h4><i class="fas fa-palette"></i> Temas</h4>
        <button class="float-close">&times;</button>
    </div>
    <div class="float-options">
        <button data-theme="dark" class="theme-option">
            <span class="theme-preview dark-preview"></span>
            <span>Tema Oscuro</span>
        </button>
        <button data-theme="light" class="theme-option">
            <span class="theme-preview light-preview"></span>
            <span>Tema Claro</span>
        </button>
        <button data-theme="military-blue" class="theme-option">
            <span class="theme-preview blue-preview"></span>
            <span>Azul Militar</span>
        </button>
        <button data-theme="tactical-green" class="theme-option">
            <span class="theme-preview green-preview"></span>
            <span>Verde T√°ctico</span>
        </button>
        <button data-theme="terminal" class="theme-option">
            <span class="theme-preview terminal-preview"></span>
            <span>Terminal</span>
        </button>
    </div>
</div>

    <!-- SCRIPTS -->
    <script src="js/profile.js"></script>
    <!-- Despu√©s de los otros scripts -->
<script src="js/theme-system.js"></script>

    <script>
const temas = ['dark', 'light', 'military-blue', 'tactical-green', 'terminal'];

// √çconos para cada tema
const iconosTema = {
    'dark': 'fas fa-moon',
    'light': 'fas fa-sun',
    'military-blue': 'fas fa-star',
    'tactical-green': 'fas fa-crosshairs',
    'terminal': 'fas fa-terminal'
};

// Nombres amigables para cada tema
const nombresTema = {
    'dark': 'Oscuro',
    'light': 'Claro',
    'military-blue': 'Azul Militar',
    'tactical-green': 'Verde T√°ctico',
    'terminal': 'Terminal'
};

// Funci√≥n principal para cambiar tema
function cambiarTema() {
    const html = document.documentElement;
    const temaActual = html.getAttribute('data-theme') || 'dark';
    
    // Encontrar el √≠ndice del tema actual
    const indiceActual = temas.indexOf(temaActual);
    
    // Calcular siguiente tema (ciclado)
    const siguienteIndice = (indiceActual + 1) % temas.length;
    const siguienteTema = temas[siguienteIndice];
    
    // Aplicar nuevo tema
    html.setAttribute('data-theme', siguienteTema);
    
    // Guardar preferencia en localStorage
    localStorage.setItem('cop_theme', siguienteTema);
    
    // Actualizar TODOS los botones de tema en la p√°gina
    actualizarBotonesTema(siguienteTema);
    
    // Mostrar notificaci√≥n elegante (opcional)
    mostrarNotificacionTema(siguienteTema);
    
    // Log para depuraci√≥n
    console.log(`üé® Tema cambiado: ${temaActual} ‚Üí ${siguienteTema}`);
}

// Funci√≥n para cambiar a un tema espec√≠fico
function cambiarATheme(temaEspecifico) {
    if (!temas.includes(temaEspecifico)) {
        console.error(`Tema "${temaEspecifico}" no v√°lido. Temas disponibles:`, temas);
        return;
    }
    
    const html = document.documentElement;
    html.setAttribute('data-theme', temaEspecifico);
    localStorage.setItem('cop_theme', temaEspecifico);
    actualizarBotonesTema(temaEspecifico);
    console.log(`üé® Tema cambiado a: ${temaEspecifico}`);
}

// Funci√≥n para actualizar todos los botones de tema
function actualizarBotonesTema(tema) {
    // Actualizar bot√≥n principal (si existe)
    const botonPrincipal = document.querySelector('button[onclick="cambiarTema()"]');
    if (botonPrincipal) {
        botonPrincipal.innerHTML = `<i class="${iconosTema[tema] || 'fas fa-palette'}"></i> ${nombresTema[tema] || 'Tema'}`;
        botonPrincipal.title = `Tema actual: ${nombresTema[tema]}. Click para cambiar`;
    }
    
    // Actualizar bot√≥n del header (si existe)
    const botonHeader = document.querySelector('.theme-quick-toggle button');
    if (botonHeader) {
        const icono = botonHeader.querySelector('i');
        if (icono) {
            // Rotar entre √≠conos seg√∫n el tema
            const iconos = ['fa-palette', 'fa-moon', 'fa-sun', 'fa-star', 'fa-crosshairs'];
            const iconoIndex = temas.indexOf(tema) % iconos.length;
            icono.className = `fas ${iconos[iconoIndex]}`;
        }
    }
    
    // Actualizar bot√≥n espec√≠fico con id "themeToggleBtn"
    const botonToggle = document.getElementById('themeToggleBtn');
    if (botonToggle) {
        botonToggle.innerHTML = `<i class="${iconosTema[tema] || 'fas fa-palette'}"></i> ${nombresTema[tema] || 'Cambiar Tema'}`;
    }
}

// Funci√≥n para mostrar notificaci√≥n elegante
function mostrarNotificacionTema(tema) {
    // Crear notificaci√≥n
    const notificacion = document.createElement('div');
    notificacion.className = 'theme-notification';
    notificacion.innerHTML = `
        <div class="notification-icon">
            <i class="${iconosTema[tema] || 'fas fa-palette'}"></i>
        </div>
        <div class="notification-content">
            <strong>Tema cambiado</strong>
            <p>${nombresTema[tema]} activado</p>
        </div>
    `;
    
    // Estilos para la notificaci√≥n
    notificacion.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--color-secondary);
        color: var(--color-text);
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid var(--color-accent);
        display: flex;
        align-items: center;
        gap: 15px;
        box-shadow: var(--shadow-lg);
        z-index: 10000;
        animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s;
        animation-fill-mode: forwards;
    `;
    
    // A√±adir al documento
    document.body.appendChild(notificacion);
    
    // Remover despu√©s de 3 segundos
    setTimeout(() => {
        if (notificacion.parentNode) {
            notificacion.parentNode.removeChild(notificacion);
        }
    }, 3000);
}

// A√±adir estilos de animaci√≥n para la notificaci√≥n
const style = document.createElement('style');
style.textContent = `
    @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
    }
`;
document.head.appendChild(style);

// Cargar tema guardado al iniciar
document.addEventListener('DOMContentLoaded', function() {
    const temaGuardado = localStorage.getItem('cop_theme') || 'dark';
    
    // Aplicar tema guardado
    document.documentElement.setAttribute('data-theme', temaGuardado);
    
    // Actualizar botones
    actualizarBotonesTema(temaGuardado);
    
    console.log(`üé® Tema cargado: ${temaGuardado}`);
});

// Funci√≥n para el bot√≥n espec√≠fico en perfil.html
function cycleTheme() {
    cambiarTema();
}
    </script>
    
    <script>
        // Inicializar cuando el DOM est√© listo
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar imagen de fondo
            checkBackgroundImage();
        });

        // Funci√≥n para verificar imagen de fondo
        function checkBackgroundImage() {
            const backgroundOverlay = document.getElementById('backgroundOverlay');
            const img = new Image();
            img.onload = function() {
                console.log('Imagen de perfil cargada correctamente');
            };
            img.onerror = function() {
                backgroundOverlay.classList.add('fallback');
                console.log('Usando fondo alternativo para perfil');
            };
            img.src = 'assets/images/dashboard.jpg';
        }

        // Funci√≥n para alternar notificaciones
        function toggleNotificaciones() {
            const boton = document.querySelector('button[onclick="toggleNotificaciones()"]');
            if (boton.innerHTML.includes('bell-slash')) {
                boton.innerHTML = '<i class="fas fa-bell"></i> Notificaciones';
                alert('Notificaciones habilitadas');
            } else {
                boton.innerHTML = '<i class="fas fa-bell-slash"></i> Notificaciones';
                alert('Notificaciones deshabilitadas');
            }
        }

    
    // Aplicar tema guardado al cargar
    document.addEventListener('DOMContentLoaded', function() {
        const savedTheme = localStorage.getItem('cop_theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);
        
        // Actualizar bot√≥n si existe
        const button = document.querySelector('button[onclick="cambiarTema()"]');
        if (button) {
            const icon = button.querySelector('i');
            if (icon) {
                icon.className = savedTheme === 'dark' ? 'fas fa-moon' : 'fas fa-sun';
            }
        }
    });

        // Funci√≥n para abrir ajustes
        function abrirAjustes() {
            document.getElementById('ajustesModal').style.display = 'flex';
        }

        // Funci√≥n para cerrar ajustes
        function cerrarAjustes() {
            document.getElementById('ajustesModal').style.display = 'none';
        }

        // Funci√≥n para guardar ajustes
        function guardarAjustes() {
            const nombre = document.getElementById('nombreOperador').value;
            const email = document.getElementById('emailNotificacion').value;
            const recordatorios = document.getElementById('recordatorios').value;
            const idioma = document.getElementById('idioma').value;
            
            // Aqu√≠ tu compa√±ero conectar√° con Supabase para guardar los ajustes
            console.log('Ajustes guardados:', { nombre, email, recordatorios, idioma });
            
            alert('¬°Ajustes guardados correctamente!');
            cerrarAjustes();
        }
    </script>
    <script>
// ============================================
// SISTEMA DE SELECTOR DE TEMAS
// ============================================

// Lista de temas disponibles
const temasDisponibles = ['dark', 'light', 'military-blue', 'tactical-green', 'terminal'];

// Funci√≥n para cambiar a un tema espec√≠fico
function cambiarATema(tema) {
    if (!temasDisponibles.includes(tema)) {
        console.error(`Tema "${tema}" no disponible`);
        return;
    }
    
    // Aplicar tema al documento
    document.documentElement.setAttribute('data-theme', tema);
    
    // Guardar en localStorage
    localStorage.setItem('cop_theme', tema);
    
    // Actualizar indicador visual en botones
    actualizarTemaActivo(tema);
    
    // Mostrar notificaci√≥n (opcional)
    mostrarFeedbackTema(tema);
    
    console.log(`üé® Tema cambiado a: ${tema}`);
}

// Funci√≥n para actualizar el tema activo en los botones
function actualizarTemaActivo(temaActivo) {
    // Remover clase 'active' de todos los botones
    document.querySelectorAll('.theme-option').forEach(boton => {
        boton.classList.remove('active');
        boton.removeAttribute('data-active');
        
        // Verificar si este bot√≥n corresponde al tema activo
        if (boton.getAttribute('data-theme') === temaActivo) {
            boton.classList.add('active');
            boton.setAttribute('data-active', 'true');
        }
    });
    
    // Actualizar tambi√©n el bot√≥n de toggle r√°pido
    const botonToggle = document.querySelector('.btn-theme-toggle, [onclick="cambiarTema()"], [onclick="cycleTheme()"]');
    if (botonToggle) {
        const iconos = {
            'dark': 'üåô', 'light': '‚òÄÔ∏è', 'military-blue': 'üéñÔ∏è',
            'tactical-green': 'üéØ', 'terminal': 'üíª'
        };
        if (botonToggle.querySelector('i')) {
            botonToggle.innerHTML = `<i class="fas fa-palette"></i>`;
        } else {
            botonToggle.innerHTML = iconos[temaActivo] || 'üé®';
        }
    }
}

// Funci√≥n para mostrar feedback visual
function mostrarFeedbackTema(tema) {
    // Crear efecto de transici√≥n
    document.documentElement.classList.add('theme-transition');
    setTimeout(() => {
        document.documentElement.classList.remove('theme-transition');
    }, 300);
    
    // Notificaci√≥n toast (opcional)
    const toast = document.createElement('div');
    toast.className = 'theme-toast';
    toast.textContent = `Tema: ${obtenerNombreTema(tema)}`;
    toast.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--color-accent);
        color: white;
        padding: 10px 20px;
        border-radius: 5px;
        z-index: 10000;
        animation: slideIn 0.3s ease, fadeOut 0.3s ease 2s;
        animation-fill-mode: forwards;
    `;
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 2300);
}

// Funci√≥n para obtener nombre legible del tema
function obtenerNombreTema(tema) {
    const nombres = {
        'dark': 'Oscuro',
        'light': 'Claro', 
        'military-blue': 'Azul Militar',
        'tactical-green': 'Verde T√°ctico',
        'terminal': 'Terminal'
    };
    return nombres[tema] || tema;
}

// Funci√≥n de ciclo (para el bot√≥n de cambio r√°pido)
function cambiarTema() {
    const temaActual = document.documentElement.getAttribute('data-theme') || 'dark';
    const indiceActual = temasDisponibles.indexOf(temaActual);
    const siguienteIndice = (indiceActual + 1) % temasDisponibles.length;
    const siguienteTema = temasDisponibles[siguienteIndice];
    
    cambiarATema(siguienteTema);
}

// Funci√≥n de ciclo alternativa
function cycleTheme() {
    cambiarTema();
}

// Inicializar cuando el DOM est√© listo
document.addEventListener('DOMContentLoaded', function() {
    // Cargar tema guardado
    const temaGuardado = localStorage.getItem('cop_theme') || 'dark';
    document.documentElement.setAttribute('data-theme', temaGuardado);
    
    // Configurar eventos para todos los selectores de tema
    configurarSelectoresTema();
    
    // Actualizar indicadores visuales
    setTimeout(() => actualizarTemaActivo(temaGuardado), 100);
    
    console.log('‚úÖ Sistema de temas inicializado');
});

// Funci√≥n para configurar todos los selectores de tema
function configurarSelectoresTema() {
    // Para botones individuales con data-theme
    document.querySelectorAll('.theme-option[data-theme]').forEach(boton => {
        boton.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const tema = this.getAttribute('data-theme');
            cambiarATema(tema);
        });
        
        // A√±adir efecto hover
        boton.addEventListener('mouseenter', function() {
            this.style.transform = 'scale(1.1)';
        });
        
        boton.addEventListener('mouseleave', function() {
            this.style.transform = 'scale(1)';
        });
    });
    
    // Para cualquier bot√≥n con clase theme-selector
    document.querySelectorAll('.theme-selector button').forEach(boton => {
        if (!boton.hasAttribute('data-theme')) {
            const tema = boton.textContent.trim().toLowerCase();
            if (temasDisponibles.includes(tema)) {
                boton.setAttribute('data-theme', tema);
                boton.addEventListener('click', () => cambiarATema(tema));
            }
        }
    });
}

// A√±adir estilos CSS din√°micamente
const style = document.createElement('style');
style.textContent = `
    .theme-option {
        transition: all 0.3s ease !important;
        cursor: pointer !important;
    }
    
    .theme-option.active {
        border-color: var(--color-accent) !important;
        background: rgba(var(--color-accent-rgb, 230, 36, 41), 0.1) !important;
        transform: scale(1.05) !important;
    }
    
    .theme-option:hover:not(.active) {
        border-color: var(--color-text-muted) !important;
    }
    
    .theme-transition * {
        transition: background-color 0.3s ease, color 0.3s ease !important;
    }
    
    @keyframes slideIn {
        from { transform: translateX(100px); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
    }
`;
document.head.appendChild(style);
</script>
<!-- Script de inicializaci√≥n r√°pida -->
<script>
// Prevenir FOUC (Flash of Unstyled Content)
document.documentElement.style.visibility = 'hidden';
document.documentElement.style.opacity = '0';

window.addEventListener('DOMContentLoaded', () => {
    // Aplicar tema guardado inmediatamente
    const savedTheme = localStorage.getItem('cop_theme') || 'dark';
    document.documentElement.setAttribute('data-theme', savedTheme);
    
    // Mostrar contenido
    setTimeout(() => {
        document.documentElement.style.visibility = '';
        document.documentElement.style.opacity = '1';
    }, 10);
    
    // Cargar el sistema de temas
    if (typeof initThemeSystem === 'function') {
        initThemeSystem();
    }
});

// Fallback si hay error
setTimeout(() => {
    if (document.documentElement.style.visibility === 'hidden') {
        document.documentElement.style.visibility = '';
        document.documentElement.style.opacity = '1';
    }
}, 1000);
</script>
</body>
</html>