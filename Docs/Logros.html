<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logros | Call of Productivity</title>
    
    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Estilos -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/logros.css">
    
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h1>COP</h1>
                <span>Call of Productivity</span>
            </div>
            
            <nav class="nav-menu">
                <a href="dashboard.html" class="nav-item">
                    <i class="fas fa-radar"></i>
                    <span>Dashboard</span>
                </a>
                <a href="missions.html" class="nav-item">
                    <i class="fas fa-crosshairs"></i>
                    <span>Misiones</span>
                </a>
                <a href="profile.html" class="nav-item">
                    <i class="fas fa-user-secret"></i>
                    <span>Perfil</span>
                </a>
                <a href="Logros.html" class="nav-item active">
                    <i class="fas fa-trophy"></i>
                    <span>Logros</span>
                </a>
                <a href="settings.html" class="nav-item">
                    <i class="fas fa-cog"></i>
                    <span>Configuración</span>
                </a>
                <button id="logout-btn" class="nav-item logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Cerrar Sesión</span>
                </button>
            </nav>
        </aside>

        <!-- Contenido Principal -->
        <main class="main-content">
            <!-- Header -->
            <header class="achievements-header">
                <div class="header-left">
                    <h1><i class="fas fa-trophy"></i> Sala de Trofeos</h1>
                    <p class="header-subtitle">Demuestra tu disciplina y alcanza la grandeza operativa</p>
                </div>
                <div class="header-right">
                    <div class="achievements-stats">
                        <div class="stat-badge">
                            <span class="stat-value" id="totalAchievements">0</span>
                            <span class="stat-label">Logros</span>
                        </div>
                        <div class="stat-badge">
                            <span class="stat-value" id="completedAchievements">0</span>
                            <span class="stat-label">Completados</span>
                        </div>
                        <div class="stat-badge">
                            <span class="stat-value" id="achievementRate">0%</span>
                            <span class="stat-label">Progreso</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Filtros -->
            <div class="achievements-filters">
                <div class="filter-group">
                    <button class="filter-btn active" data-filter="all">
                        <i class="fas fa-layer-group"></i>
                        Todos
                    </button>
                    <button class="filter-btn" data-filter="completed">
                        <i class="fas fa-check-circle"></i>
                        Completados
                    </button>
                    <button class="filter-btn" data-filter="in-progress">
                        <i class="fas fa-spinner"></i>
                        En Progreso
                    </button>
                    <button class="filter-btn" data-filter="locked">
                        <i class="fas fa-lock"></i>
                        Bloqueados
                    </button>
                </div>
                
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="achievementSearch" placeholder="Buscar logros...">
                </div>
            </div>

            <!-- Grid de Logros -->
            <div class="achievements-grid">
                <!-- Sección: Logros de Productividad -->
                <section class="achievements-category">
                    <div class="category-header">
                        <h2><i class="fas fa-bolt"></i> Productividad</h2>
                        <span class="category-progress" id="productivityProgress">0/8</span>
                    </div>
                    <div class="achievements-list" id="productivityAchievements">
                        <!-- Logros se cargarán dinámicamente -->
                    </div>
                </section>

                <!-- Sección: Logros de Misiones -->
                <section class="achievements-category">
                    <div class="category-header">
                        <h2><i class="fas fa-crosshairs"></i> Misiones</h2>
                        <span class="category-progress" id="missionsProgress">0/6</span>
                    </div>
                    <div class="achievements-list" id="missionsAchievements">
                        <!-- Logros se cargarán dinámicamente -->
                    </div>
                </section>

                <!-- Sección: Logros de Racha -->
                <section class="achievements-category">
                    <div class="category-header">
                        <h2><i class="fas fa-fire"></i> Consistencia</h2>
                        <span class="category-progress" id="streakProgress">0/5</span>
                    </div>
                    <div class="achievements-list" id="streakAchievements">
                        <!-- Logros se cargarán dinámicamente -->
                    </div>
                </section>

                <!-- Sección: Logros Especiales -->
                <section class="achievements-category">
                    <div class="category-header">
                        <h2><i class="fas fa-star"></i> Operaciones Especiales</h2>
                        <span class="category-progress" id="specialProgress">0/4</span>
                    </div>
                    <div class="achievements-list" id="specialAchievements">
                        <!-- Logros se cargarán dinámicamente -->
                    </div>
                </section>

                <!-- Sección: Logros de Maestría -->
                <section class="achievements-category">
                    <div class="category-header">
                        <h2><i class="fas fa-crown"></i> Maestría</h2>
                        <span class="category-progress" id="masteryProgress">0/3</span>
                    </div>
                    <div class="achievements-list" id="masteryAchievements">
                        <!-- Logros se cargarán dinámicamente -->
                    </div>
                </section>

                <!-- Sección: Logros Secretos -->
                <section class="achievements-category">
                    <div class="category-header">
                        <h2><i class="fas fa-user-secret"></i> Operaciones Secretas</h2>
                        <span class="category-progress" id="secretProgress">0/4</span>
                    </div>
                    <div class="achievements-list" id="secretAchievements">
                        <!-- Logros se cargarán dinámicamente -->
                    </div>
                </section>
            </div>

            <!-- Estadísticas Avanzadas -->
            <div class="achievements-stats-grid">
                <div class="stats-card">
                    <h3><i class="fas fa-chart-line"></i> Progreso General</h3>
                    <div class="progress-ring">
                        <svg width="120" height="120" viewBox="0 0 120 120">
                            <circle class="progress-bg" cx="60" cy="60" r="54"></circle>
                            <circle class="progress-bar" cx="60" cy="60" r="54"></circle>
                        </svg>
                        <div class="progress-text">
                            <span id="overallProgress">0%</span>
                            <small>Completado</small>
                        </div>
                    </div>
                    <div class="progress-details">
                        <div class="detail-item">
                            <span class="detail-label">Logros Totales</span>
                            <span class="detail-value" id="totalAchievementsCount">0</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Completados</span>
                            <span class="detail-value" id="completedCount">0</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">XP Total</span>
                            <span class="detail-value" id="totalXpReward">0</span>
                        </div>
                    </div>
                </div>

                <div class="stats-card">
                    <h3><i class="fas fa-award"></i> Logros Recientes</h3>
                    <div class="recent-achievements" id="recentAchievements">
                        <div class="recent-item">
                            <div class="recent-icon">
                                <i class="fas fa-medal"></i>
                            </div>
                            <div class="recent-info">
                                <h4>Primera Misión</h4>
                                <p>Completa tu primera misión</p>
                                <small>Hace 2 días • +100 XP</small>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-secondary" id="viewAllRecentBtn">
                        <i class="fas fa-history"></i>
                        Ver Historial Completo
                    </button>
                </div>

                <div class="stats-card">
                    <h3><i class="fas fa-calendar-alt"></i> Actividad de Logros</h3>
                    <div class="activity-chart">
                        <canvas id="achievementActivityChart"></canvas>
                    </div>
                    <div class="activity-stats">
                        <div class="activity-item">
                            <span class="activity-label">Hoy</span>
                            <span class="activity-value" id="todayAchievements">0</span>
                        </div>
                        <div class="activity-item">
                            <span class="activity-label">Esta Semana</span>
                            <span class="activity-value" id="weekAchievements">0</span>
                        </div>
                        <div class="activity-item">
                            <span class="activity-label">Este Mes</span>
                            <span class="activity-value" id="monthAchievements">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer class="achievements-footer">
                <div class="footer-left">
                    <span>Sala de Trofeos • Última actualización: <span id="lastUpdateTime">Hace unos momentos</span></span>
                </div>
                <div class="footer-right">
                    <button class="btn btn-secondary" id="shareAchievementsBtn">
                        <i class="fas fa-share-alt"></i>
                        Compartir Progreso
                    </button>
                    <button class="btn btn-primary" id="claimRewardsBtn">
                        <i class="fas fa-gift"></i>
                        Reclamar Recompensas
                    </button>
                </div>
            </footer>
        </main>
    </div>

    <!-- Modal de Detalles de Logro -->
    <div id="achievementModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-medal"></i> <span id="modalAchievementName">Nombre del Logro</span></h3>
                <button class="modal-close" id="modalCloseBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="achievement-modal-content">
                    <div class="achievement-modal-icon">
                        <i class="fas fa-trophy" id="modalAchievementIcon"></i>
                    </div>
                    <div class="achievement-modal-info">
                        <p id="modalAchievementDescription">Descripción del logro</p>
                        <div class="achievement-modal-details">
                            <div class="detail">
                                <span class="detail-label"><i class="fas fa-bolt"></i> Recompensa:</span>
                                <span class="detail-value" id="modalAchievementReward">+100 XP</span>
                            </div>
                            <div class="detail">
                                <span class="detail-label"><i class="fas fa-calendar"></i> Desbloqueado:</span>
                                <span class="detail-value" id="modalAchievementDate">No desbloqueado</span>
                            </div>
                            <div class="detail">
                                <span class="detail-label"><i class="fas fa-users"></i> Rarosidad:</span>
                                <span class="detail-value" id="modalAchievementRarity">Común</span>
                            </div>
                        </div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span id="modalProgressText">Progreso: 0/10</span>
                                <span id="modalProgressPercent">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="modalProgressFill"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" id="modalActionBtn">
                    <i class="fas fa-rocket"></i>
                    Comenzar Desafío
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/supabaseClient.js"></script>
    <script src="js/achievements.js"></script>
</body>
</html>